diff --git a/sljit/sljitConfigInternal.h b/sljit/sljitConfigInternal.h
index 5a9827d..f4eee11 100644
--- a/sljit/sljitConfigInternal.h
+++ b/sljit/sljitConfigInternal.h
@@ -337,8 +337,10 @@
 #define SLJIT_CACHE_FLUSH(from, to) \
 	__clear_cache((char*)(from), (char*)(to))
 #elif(_WIN32)
+#if !defined(WINAPI_FAMILY) || (WINAPI_FAMILY == WINAPI_FAMILY_DESKTOP_APP)
 #pragma comment(lib, "kernel32.lib")
 uint32_t FlushInstructionCache(void *hProcess, void *lpBaseAddress, uintptr_t dwSize);
+#endif
 #define SLJIT_CACHE_FLUSH(from, to) \
 	FlushInstructionCache(GetCurrentProcess(), (void*)(from), (uintptr_t)(to - from));
 #endif
-- 
2.10.2.windows.1

